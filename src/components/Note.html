
<:Head>
  <title>{{note != null ? note.title : "Not found"}}</title>
</:Head>

{{#if note != null}}

  <article>
    
    <section class="details">
      
      {{#if note.publishedDate}}
        <div>
          <label>Published:</label>
          <time>{{note.publishedDate}}</time>
        </div>
      {{/if}}
      
      {{#if note.canonicalURL}}
        <div>{{note.canonicalURL}}</div>
      {{/if}}
      
      {{#if note.lastModified}}
        <div>
          <label>Last Modified</label>
          <time>{{note.lastModified}}</time>
        </div>
      {{/if}}
      
    </section>
    
    <textarea bind:value='note.content' autofocus>{{note.content}}</textarea>
    
  </article>
  
{{else}}
  <p>This doesn't exist anymore.</p>
{{/if}}

<style>

  article {
    display: flex;
    flex: 1 0 auto;
    height: 100%;
    width: 100%;
  }

  .details {
    display: flex;
    flex: 1 1 auto;
  }
  
  textarea {
    font-size: 2rem;
    line-height: 1.6em;
    display: block;
    flex-grow: 1;
    width: 100%;
    height: 100%;
    padding: 2rem 2rem 2rem 10vw;
    border: none;
    color: #333;
    font-family: 'Ubuntu Mono', monospace;
    background-color: transparent;
  }
  
  textarea:focus {
    outline: none;
    box-shadow: none;
  }
  
</style>

<script>
  
  export default {
    
    data(){
      return { note: null }
    },
    
    oncreate() {
      
      this.store.observe("currentNoteID", id => {
        var notes = this.store.get("notes")
        
        var note = notes.find(a => a.id == id) || null;
        
        this.set({ note })
      })
    }
    
  }
  
</script>